/**
 * Professional Forms - Enterprise CSS Styles
 * 
 * Based on Chakra UI v3 patterns with Cresol design system integration
 * WCAG 2.1 AA compliant with full accessibility support
 * Mobile-first responsive design with touch-friendly interactions
 * Consistent with DESIGN_SYSTEM_PADRONIZADO.md standards
 */

/* ========================================
   Form Field Wrapper
   ======================================== */

.form-field-wrapper {
  @apply flex flex-col gap-1.5 w-full;
}

.form-field-wrapper[data-state="disabled"] {
  @apply opacity-60 pointer-events-none;
}

/* Form Field Label */
.form-field-label {
  @apply text-sm font-medium leading-5;
  color: var(--color-gray-dark);
}

.form-field-label:has(+ .form-field-input-container .form-input-invalid) {
  color: var(--color-error-text);
}

.form-field-required {
  @apply text-red-500 ml-1;
}

.form-field-loading {
  @apply ml-2 inline-flex items-center;
}

.form-field-loading svg {
  @apply w-3 h-3;
  color: var(--color-primary);
}

/* Form Field Input Container */
.form-field-input-container {
  @apply relative flex items-center;
}

.form-field-input {
  @apply flex-1;
}

/* Form Field Icons */
.form-field-icon {
  @apply absolute z-10 flex items-center justify-center w-10 h-10 transition-colors duration-200;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
  @apply hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-1 rounded-md;
  color: var(--color-gray);
  top: 50%;
  transform: translateY(-50%);
}

.form-field-icon:focus {
  @apply ring-2;
  --tw-ring-color: var(--color-primary);
}

.form-field-icon svg {
  @apply w-4 h-4;
}

.form-field-icon-start {
  left: 0px;
}

.form-field-icon-end {
  right: 0px;
}

/* Form Field Messages */
.form-field-error {
  @apply flex items-center gap-1.5 text-sm;
  color: var(--color-error-text);
}

.form-field-error-icon {
  @apply w-4 h-4 flex-shrink-0;
}

.form-field-help {
  @apply flex items-center gap-1.5 text-sm;
  color: var(--color-gray);
}

.form-field-help-icon {
  @apply w-4 h-4 flex-shrink-0;
}

.form-field-success {
  @apply flex items-center gap-1.5 text-sm;
  color: var(--color-success-text);
}

.form-field-success-icon {
  @apply w-4 h-4 flex-shrink-0;
}

/* ========================================
   Form Input Component
   ======================================== */

.form-input-wrapper {
  @apply relative flex items-center;
}

/* Base Input Styles */
.form-input-base {
  @apply w-full font-medium transition-all duration-200 ease-in-out;
  @apply focus:outline-none focus:ring-2 focus:ring-offset-0;
  @apply disabled:opacity-60 disabled:cursor-not-allowed disabled:bg-gray-50;
  @apply placeholder:text-gray-400;
  font-family: inherit;
  color: var(--color-gray-dark);
  background-color: var(--color-white);
}

.form-input-base:focus {
  --tw-ring-color: var(--color-primary);
}

/* Input Variants */
.form-input-outline {
  @apply border border-gray-300 rounded-md;
}

.form-input-outline:hover:not(:disabled):not(:focus) {
  @apply border-gray-400;
}

.form-input-outline:focus {
  @apply border-transparent;
  border-color: var(--color-primary);
}

.form-input-filled {
  @apply bg-gray-50 border border-transparent rounded-md;
}

.form-input-filled:hover:not(:disabled):not(:focus) {
  @apply bg-gray-100;
}

.form-input-filled:focus {
  @apply bg-white;
  border-color: var(--color-primary);
}

.form-input-underline {
  @apply bg-transparent border-0 border-b-2 border-gray-300 rounded-none px-0;
}

.form-input-underline:focus {
  border-bottom-color: var(--color-primary);
}

/* Input Sizes */
.form-input-sm {
  @apply text-sm px-3 py-2 h-8;
}

.form-input-md {
  @apply text-base px-4 py-2.5 h-11;
}

.form-input-lg {
  @apply text-lg px-5 py-3 h-12;
}

/* Input States */
.form-input-invalid {
  border-color: var(--color-error-text) !important;
}

.form-input-invalid:focus {
  --tw-ring-color: var(--color-error-text);
}

.form-input-success {
  border-color: var(--color-success-text) !important;
}

.form-input-success:focus {
  --tw-ring-color: var(--color-success-text);
}

.form-input-loading {
  @apply pr-10;
}

.form-input-focused {
  /* Focus styles are handled by :focus pseudo-class */
}

.form-input-disabled {
  @apply bg-gray-50 cursor-not-allowed;
}

/* Input with Icons */
.form-input-has-start-icon {
  @apply pl-10;
}

.form-input-has-end-icon {
  @apply pr-10;
}

.form-input-full-width {
  @apply w-full;
}

/* Input Icon Containers */
.form-input-icon-container {
  @apply absolute flex items-center justify-center;
  @apply pointer-events-none;
  top: 50%;
  transform: translateY(-50%);
}

.form-input-icon-start {
  @apply left-0 pl-3;
}

.form-input-icon-end {
  @apply right-0 pr-3;
}

.form-input-icon-button {
  @apply pointer-events-auto flex items-center justify-center w-6 h-6;
  @apply transition-colors duration-200 rounded hover:bg-gray-100;
  @apply focus:outline-none focus:ring-2 focus:ring-offset-1;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.form-input-icon-button:focus {
  --tw-ring-color: var(--color-primary);
}

.form-input-icon {
  @apply w-4 h-4;
  color: var(--color-gray);
}

.form-input-spinner {
  @apply animate-spin;
  color: var(--color-primary);
}

.form-input-clear-button:hover .form-input-icon,
.form-input-password-toggle:hover .form-input-icon {
  color: var(--color-gray-dark);
}

/* ========================================
   Form Select Component
   ======================================== */

.form-select-wrapper {
  @apply relative w-full;
}

/* Hidden Native Select */
.form-select-native {
  @apply sr-only;
}

/* Custom Select Button */
.form-select-base {
  @apply w-full flex items-center justify-between font-medium transition-all duration-200;
  @apply focus:outline-none focus:ring-2 focus:ring-offset-0;
  @apply disabled:opacity-60 disabled:cursor-not-allowed disabled:bg-gray-50;
  @apply cursor-pointer relative;
  color: var(--color-gray-dark);
  background-color: var(--color-white);
}

.form-select-base:focus {
  --tw-ring-color: var(--color-primary);
}

/* Select Variants */
.form-select-outline {
  @apply border border-gray-300 rounded-md;
}

.form-select-outline:hover:not(:disabled):not(.form-select-focused) {
  @apply border-gray-400;
}

.form-select-outline.form-select-focused {
  @apply border-transparent;
  border-color: var(--color-primary);
}

.form-select-filled {
  @apply bg-gray-50 border border-transparent rounded-md;
}

.form-select-filled:hover:not(:disabled):not(.form-select-focused) {
  @apply bg-gray-100;
}

.form-select-filled.form-select-focused {
  @apply bg-white;
  border-color: var(--color-primary);
}

.form-select-underline {
  @apply bg-transparent border-0 border-b-2 border-gray-300 rounded-none;
}

.form-select-underline.form-select-focused {
  border-bottom-color: var(--color-primary);
}

/* Select Sizes */
.form-select-sm {
  @apply text-sm px-3 py-2 h-8;
}

.form-select-md {
  @apply text-base px-4 py-2.5 h-11;
}

.form-select-lg {
  @apply text-lg px-5 py-3 h-12;
}

/* Select States */
.form-select-invalid {
  border-color: var(--color-error-text) !important;
}

.form-select-invalid:focus {
  --tw-ring-color: var(--color-error-text);
}

.form-select-loading .form-select-value {
  @apply opacity-75;
}

.form-select-disabled {
  @apply bg-gray-50 cursor-not-allowed;
}

.form-select-full-width {
  @apply w-full;
}

/* Select Value Display */
.form-select-value {
  @apply flex-1 text-left truncate;
}

.form-select-placeholder {
  color: var(--color-gray);
}

.form-select-selected-option {
  @apply flex flex-col;
}

.form-select-option-description {
  @apply text-xs opacity-75 truncate;
}

.form-select-loading-text {
  @apply animate-pulse;
}

/* Select Icons */
.form-select-icons {
  @apply flex items-center gap-1 ml-2;
}

.form-select-icon {
  @apply w-4 h-4 flex-shrink-0;
  color: var(--color-gray);
}

.form-select-spinner {
  @apply animate-spin;
  color: var(--color-primary);
}

.form-select-arrow {
  @apply transition-transform duration-200;
}

.form-select-clear-button {
  @apply p-1 hover:bg-gray-100 rounded transition-colors duration-200;
  @apply focus:outline-none focus:ring-2 focus:ring-offset-1;
}

.form-select-clear-button:focus {
  --tw-ring-color: var(--color-primary);
}

/* Dropdown Menu */
.form-select-dropdown {
  @apply absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50;
  @apply overflow-hidden;
}

/* Search Input */
.form-select-search {
  @apply flex items-center gap-2 p-3 border-b border-gray-200;
}

.form-select-search-icon {
  @apply w-4 h-4 flex-shrink-0;
  color: var(--color-gray);
}

.form-select-search-input {
  @apply flex-1 text-sm border-0 focus:outline-none bg-transparent;
  color: var(--color-gray-dark);
}

.form-select-search-input::placeholder {
  color: var(--color-gray);
}

/* Options Container */
.form-select-options {
  @apply max-h-60 overflow-y-auto;
}

/* Individual Option */
.form-select-option {
  @apply w-full flex items-center justify-between px-3 py-2.5 text-left text-sm;
  @apply hover:bg-gray-50 transition-colors duration-150;
  @apply focus:outline-none focus:bg-gray-50;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
  color: var(--color-gray-dark);
}

.form-select-option-highlighted {
  @apply bg-gray-50;
}

.form-select-option-selected {
  background-color: rgba(245, 130, 32, 0.05);
  color: var(--color-primary);
}

.form-select-option-disabled {
  @apply opacity-50 cursor-not-allowed;
}

.form-select-option-grouped {
  @apply pl-6;
}

.form-select-option-content {
  @apply flex-1 flex flex-col;
}

.form-select-option-label {
  @apply font-medium;
}

.form-select-option-description {
  @apply text-xs mt-0.5 opacity-75;
}

.form-select-check-icon {
  @apply w-4 h-4 ml-2;
  color: var(--color-primary);
}

/* Option Groups */
.form-select-group {
  /* Group container */
}

.form-select-group-label {
  @apply px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50;
}

/* Empty State */
.form-select-empty-state {
  @apply flex flex-col items-center justify-center py-8 px-4 text-sm;
  color: var(--color-gray);
}

.form-select-empty-icon {
  @apply w-8 h-8 mb-2;
}

/* ========================================
   Responsive Design
   ======================================== */

/* Mobile optimizations */
@media (max-width: 640px) {
  .form-field-wrapper {
    @apply gap-1;
  }
  
  .form-input-sm {
    @apply h-9 text-base; /* Minimum 44px touch target */
  }
  
  .form-input-md {
    @apply h-11 text-base;
  }
  
  .form-input-lg {
    @apply h-12 text-lg;
  }
  
  .form-select-sm {
    @apply h-9 text-base;
  }
  
  .form-select-md {
    @apply h-11 text-base;
  }
  
  .form-select-lg {
    @apply h-12 text-lg;
  }
  
  .form-select-dropdown {
    @apply max-h-48; /* Reduced height on mobile */
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .form-input-base,
  .form-select-base {
    @apply border-2;
  }
  
  .form-input-outline:focus,
  .form-select-outline.form-select-focused {
    @apply ring-4;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .form-input-base,
  .form-select-base,
  .form-select-option,
  .form-input-icon-button,
  .form-select-clear-button,
  .form-select-arrow {
    @apply transition-none;
  }
  
  .form-input-spinner,
  .form-select-spinner {
    @apply animate-none;
  }
}

/* Dark mode support (future enhancement) */
@media (prefers-color-scheme: dark) {
  /* Dark mode styles can be added here in the future */
}

/* Focus visible for keyboard navigation */
@supports selector(:focus-visible) {
  .form-input-base:focus:not(:focus-visible) {
    @apply ring-0;
  }
  
  .form-select-base:focus:not(:focus-visible) {
    @apply ring-0;
  }
}